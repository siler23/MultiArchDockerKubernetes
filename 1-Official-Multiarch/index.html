


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.4.0">
    
    
      
        <title>1. Getting Official with Multi-arch Images - From Docker to Kubernetes - Multi-Arch with Go and Nodejs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.fe0cca5b.min.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/palette.a46bcfb3.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
        
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-174658170-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview")})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="preference" data-md-color-primary="" data-md-color-accent="">
  
    
      <script>matchMedia("(prefers-color-scheme: dark)").matches&&document.body.setAttribute("data-md-color-scheme","slate")</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-getting-official-with-multi-arch-images" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="From Docker to Kubernetes - Multi-Arch with Go and Nodejs" class="md-header-nav__button md-logo" aria-label="From Docker to Kubernetes - Multi-Arch with Go and Nodejs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            From Docker to Kubernetes - Multi-Arch with Go and Nodejs
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              1. Getting Official with Multi-arch Images
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/siler23/MultiArchDockerKubernetes" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="From Docker to Kubernetes - Multi-Arch with Go and Nodejs" class="md-nav__button md-logo" aria-label="From Docker to Kubernetes - Multi-Arch with Go and Nodejs">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    From Docker to Kubernetes - Multi-Arch with Go and Nodejs
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/siler23/MultiArchDockerKubernetes" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        1. Getting Official with Multi-arch Images
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="1. Getting Official with Multi-arch Images" class="md-nav__link md-nav__link--active">
      1. Getting Official with Multi-arch Images
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#official-repositories" class="md-nav__link">
    Official Repositories
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-multi-arch-images-work" class="md-nav__link">
    How do Multi-Arch Images Work
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#checking-image-architecture" class="md-nav__link">
    Checking Image Architecture
  </a>
  
    <nav class="md-nav" aria-label="Checking Image Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#i-if-the-image-exists-on-your-system-use-docker-inspect" class="md-nav__link">
    I. If the image exists on your system use docker inspect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ii-if-the-image-isnt-on-your-system-use-the-mplatformmquery-docker-image" class="md-nav__link">
    II. If the image isn't on your system, use the mplatform/mquery docker image
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-2-learning-how-to-build-best-practice-nodejs-docker-images" class="md-nav__link">
    Part 2: Learning How to Build Best-practice Node.js Docker Images
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../2-Best-Practice-Nodejs/" title="2. Learning How to Build Best-practice Node.js Docker Images" class="md-nav__link">
      2. Learning How to Build Best-practice Node.js Docker Images
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../3-Best-Practice-go/" title="3. Guide to Building Best-practice Go Docker Images" class="md-nav__link">
      3. Guide to Building Best-practice Go Docker Images
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      4. Building Multi-arch Docker Images
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="4. Building Multi-arch Docker Images" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        4. Building Multi-arch Docker Images
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../4-Build-MultiArch/" title="Bringing Multi-arch Images to a Computer Near You" class="md-nav__link">
      Bringing Multi-arch Images to a Computer Near You
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../4-Multiarch-buildx-addendum/" title="The future - Using Buildx to make Multi-arch a Way of Life" class="md-nav__link">
      The future - Using Buildx to make Multi-arch a Way of Life
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../4-Multiarch-manual-addendum/" title="The past - The Manual Way aka Herding Cats" class="md-nav__link">
      The past - The Manual Way aka Herding Cats
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../5-Deploy-to-Kubernetes/" title="5. Kubernetes Time" class="md-nav__link">
      5. Kubernetes Time
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../0-ProxyPSA/" title="0. Hello Proxy Users" class="md-nav__link">
      0. Hello Proxy Users
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#official-repositories" class="md-nav__link">
    Official Repositories
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-multi-arch-images-work" class="md-nav__link">
    How do Multi-Arch Images Work
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#checking-image-architecture" class="md-nav__link">
    Checking Image Architecture
  </a>
  
    <nav class="md-nav" aria-label="Checking Image Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#i-if-the-image-exists-on-your-system-use-docker-inspect" class="md-nav__link">
    I. If the image exists on your system use docker inspect
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ii-if-the-image-isnt-on-your-system-use-the-mplatformmquery-docker-image" class="md-nav__link">
    II. If the image isn't on your system, use the mplatform/mquery docker image
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#part-2-learning-how-to-build-best-practice-nodejs-docker-images" class="md-nav__link">
    Part 2: Learning How to Build Best-practice Node.js Docker Images
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <h1 id="1-getting-official-with-multi-arch-images">1. Getting Official with Multi-arch Images<a class="headerlink" href="#1-getting-official-with-multi-arch-images" title="Permanent link">&para;</a></h1>
<p>This section goes through the official Docker repositories for building images and what multi-architecture images are and how to spot them.</p>
<div class="admonition caution">
<p class="admonition-title">If Using Proxy</p>
<p><strong>If using proxy</strong>, make sure you've read <a href="../0-ProxyPSA/">0-ProxyPSA</a> and have set your <code>http_proxy</code>, <code>https_proxy</code>, and <code>no_proxy</code> variables for your environment as specified there. Also note that for all docker run commands add the <code>-e</code> for each of the proxy environment variables as specified in that <a href="../0-ProxyPSA/">0-ProxyPSA</a> document.</p>
</div>
<h2 id="official-repositories">Official Repositories<a class="headerlink" href="#official-repositories" title="Permanent link">&para;</a></h2>
<p><a href="https://docs.docker.com/docker-hub/official_images/" target="_blank">Docker Official Images</a> are a special set of Docker repositories on DockerHub that host images for operating systems and base software that follow Dockerfile best practices and undergo regular security scans to allow them to serve as building blocks for your applications. These repositories are where you get the images to build your applications on top of.</p>
<p><a href="https://hub.docker.com/search?q=&amp;type=image&amp;image_filter=official" target="_blank">Check out the Docker Official Images here</a></p>
<p>We will specifically be looking at building Node.js and Go applications, so we will use the <a href="https://hub.docker.com/_/node/" target="_blank">Node.js Official Docker Image</a> and the <a href="https://hub.docker.com/_/golang/" target="_blank">Golang Official Docker Image</a> repositories. These images are multi-arch which means they support multiple architectures. All official images are <a href="https://blog.docker.com/2017/09/docker-official-images-now-multi-platform/" target="_blank">multi-arch</a>.</p>
<div class="admonition question">
<p class="admonition-title">How do we know if these images support both s390x and x86?</p>
<p>If we look at the supported architectures under the <code>Quick reference</code> section on Docker Hub, we can see both images support both the x86 [amd64] and LinuxONE/z [s390x] architectures. :)</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If not otherwise noted in documentation, containers are assumed to use Linux as the operating system.</p>
</div>
<p><img alt="docker golang architectures" src="../images/docker_golang.png" />
<strong>This means that if I run <code>docker pull node</code> on linux on Z, it will pull me the s390x image. Similarly, if I run <code>docker pull node</code> on x86, it will pull me the x86 image.</strong> Thus, once the image is built and set up as multi-arch, the difference is abstracted away from applications using the image (such as a node application built using the Node.js official image as the base) <strong>[i.e. <code>FROM node</code> works on both x86 and s390x].</strong></p>
<h2 id="how-do-multi-arch-images-work">How do Multi-Arch Images Work<a class="headerlink" href="#how-do-multi-arch-images-work" title="Permanent link">&para;</a></h2>
<p>A Multi-Arch image consists of a <a href="https://github.com/docker/distribution/blob/master/docs/spec/manifest-v2-2.md#manifest-list" target="_blank">manifest list</a>. This manifest list links its image (i.e. each Node.js image on the <a href="https://hub.docker.com/_/node/" target="_blank">Node.js Official Docker Repository</a>) to the image manifests of the docker images for the different architectures at <a href="https://hub.docker.com/r/s390x/node/" target="_blank">s390x node image</a>, <a href="https://hub.docker.com/r/amd64/node/" target="_blank">amd64 node image</a>, etc. This is how the magic happens, so instead of having to call the image for each architecture, I can just <code>docker pull node</code> and it gives me the correct architecture image. Nevertheless, there are official repositories that hold the official images for each architecture. This is where you can find the specific images linked to in the official image as in the example above.</p>
<p>For IBM Z, we have:
<a href="https://hub.docker.com/u/s390x/" target="_blank">Official s390x images</a>
such as the <a href="https://hub.docker.com/r/s390x/node/" target="_blank">s390x node</a> and <a href="https://hub.docker.com/r/s390x/golang/" target="_blank">s390x golang</a> images.</p>
<p>For x86, we have official <a href="https://hub.docker.com/u/amd64/" target="_blank">amd64 images</a> such as the <a href="https://hub.docker.com/r/amd64/node/" target="_blank">amd64 node</a> and <a href="https://hub.docker.com/r/amd64/golang/" target="_blank">amd64 golang</a> images</p>
<p>Other architectures such as <a href="https://hub.docker.com/u/ppc64le/" target="_blank">Power</a> and <a href="https://hub.docker.com/u/arm32v7/" target="_blank">arm32</a> have their own repositories as well.</p>
<h2 id="checking-image-architecture">Checking Image Architecture<a class="headerlink" href="#checking-image-architecture" title="Permanent link">&para;</a></h2>
<p>Many times you will want to find out if an image supports your architecture. If it doesn't and you try to run it, you can get a nasty little error.</p>
<div class="admonition error">
<p class="admonition-title">Error</p>
<div class="highlight"><pre><span></span><code>standard_init_linux.go:185: <span class="nb">exec</span> user process caused <span class="s2">&quot;exec format error&quot;</span>
</code></pre></div>

</div>
<p>This stops your container from working. In hopes to avoid that trouble once we've already spent the time to pull the image and try to run it, here are the best ways to check images for their architecture.</p>
<h3 id="i-if-the-image-exists-on-your-system-use-docker-inspect">I. If the image exists on your system use docker inspect<a class="headerlink" href="#i-if-the-image-exists-on-your-system-use-docker-inspect" title="Permanent link">&para;</a></h3>
<p>Assume I ran previously:</p>
<div class="highlight"><pre><span></span><code>docker pull busybox
</code></pre></div>

<p>Now, I can run:</p>
<div class="highlight"><pre><span></span><code>docker inspect -f <span class="s1">&#39;{{.Architecture}}&#39;</span> busybox
</code></pre></div>

<p><img alt="Inspect for Architecture Docker" src="../images/inspect_for_arch_docker.png" /></p>
<div class="admonition question">
<p class="admonition-title">But what if the image isn't on your system?</p>
<div class="highlight"><pre><span></span><code>docker inspect -f &#39;{{.Architecture}}&#39; alpine
</code></pre></div>

<p><img alt="Inspect Unsuccessful Alpine" src="../images/alpine_docker_inspect_failure.png" /></p>
<p>In order to fix this you would have to pull the image and then inspect it:</p>
<div class="highlight"><pre><span></span><code>docker pull alpine &amp;&amp; docker inspect -f &#39;{{.Architecture}}&#39; alpine
</code></pre></div>

<p><img alt="Time-Consuming Docker Inspect" src="../images/Docker_Inspect_Lots_of_Work.png" /></p>
<p>The problem with this is that you would potentially have to download some large images just to check if they are for your architecture, which is time-consuming and a waste of space.</p>
</div>
<h3 id="ii-if-the-image-isnt-on-your-system-use-the-mplatformmquery-docker-image">II. If the image isn't on your system, use the mplatform/mquery docker image<a class="headerlink" href="#ii-if-the-image-isnt-on-your-system-use-the-mplatformmquery-docker-image" title="Permanent link">&para;</a></h3>
<div class="tabbed-set" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">REGULAR</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code>docker run --rm mplatform/mquery ibmcom/icp-nodejs-sample
</code></pre></div>

</div>
<input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><label for="__tabbed_1_2">PROXY</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code>docker run --rm -e http_proxy=<span class="nv">%http_proxy%</span> -e https_proxy=<span class="nv">%https_proxy%</span> -e no_proxy=<span class="s2">&quot;</span><span class="nv">%no_proxy%</span><span class="s2">&quot;</span> mplatform/mquery ibmcom/icp-nodejs-sample
</code></pre></div>

<p><sup>
where <code>%http_proxy%</code>, etc. are environment variables previously set in windows to the value of the http_proxy with set http_proxy=yourproxyaddress:yourproxyport. </p>
<p>For mac/linux you would set with http_proxy=yourproxyaddress:yourproxyport and reference with $http_proxy</sup></p>
</div>
</div>
<p><img alt="Mquery Nodejs Sample" src="../images/mplatform-mquery-icp-nodejs-sample.png" /></p>
<p>The mquery image is "A simple utility and backend for querying Docker v2 API-supporting registry images and reporting on <em>manifest list</em> multi-platform image support" (<a href="https://github.com/estesp/mquery" target="_blank">mquery project github page</a>) which tells us which architectures a given image supports by checking its manifest list. If it is an image with no manifest list, it will tell us that (and which arch it supports) instead.</p>
<div class="tabbed-set" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><label for="__tabbed_2_1">REGULAR</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code>docker run --rm mplatform/mquery s390x/node
</code></pre></div>

</div>
<input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><label for="__tabbed_2_2">PROXY</label><div class="tabbed-content">
<div class="highlight"><pre><span></span><code>docker run --rm -e http_proxy=<span class="nv">%http_proxy%</span> -e https_proxy=<span class="nv">%https_proxy%</span> -e no_proxy=<span class="s2">&quot;</span><span class="nv">%no_proxy%</span><span class="s2">&quot;</span> mplatform/mquery s390x/node
</code></pre></div>

</div>
</div>
<p><img alt="s390x Node mplatform Mquery" src="../images/s390x-node-mplatform-mquery.png" /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can also use the manifest-tool itself to do this, but the manifest-tool needs to be installed first and gives more verbose output. The other alternative, the docker manifest inspect command doesn't work for all supported registries yet, (it continues to be improved) and needs to be enabled (<em>it's currently experimental</em>). Thus, using the mquery image is generally better for checking arch support quickly.</p>
</div>
<p>Knowing that the <code>exec format error</code> can be a thing of the past fills you with <a href="https://undertale.fandom.com/wiki/Determination" target="_blank">determination</a>.</p>
<p>Next up, we will build some Node.js docker images and learn some Node.js docker best practices.</p>
<h2 id="part-2-learning-how-to-build-best-practice-nodejs-docker-images"><a href="../2-Best-Practice-Nodejs/">Part 2: Learning How to Build Best-practice Node.js Docker Images</a><a class="headerlink" href="#part-2-learning-how-to-build-best-practice-nodejs-docker-images" title="Permanent link">&para;</a></h2>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href=".." title="Home" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Home
              </div>
            </div>
          </a>
        
        
          <a href="../2-Best-Practice-Nodejs/" title="2. Learning How to Build Best-practice Node.js Docker Images" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                2. Learning How to Build Best-practice Node.js Docker Images
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/siler23" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://hub.docker.com/u/gmoney23" target="_blank" rel="noopener" title="hub.docker.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://linkedin.com/in/garrett-woodworth-9a9895142/" target="_blank" rel="noopener" title="linkedin.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.d710d30a.min.js"></script>
      <script src="../assets/javascripts/bundle.b39636ac.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.a68abb33.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>